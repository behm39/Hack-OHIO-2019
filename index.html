<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.9.4/cytoscape.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="./map.css" />
</head>

<body>

    <h1>Code</h1>

<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
        Launch demo modal
      </button>
      
      <!-- Modal -->
      <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              ...
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Save changes</button>
            </div>
          </div>
        </div>
      </div>

    <!-- Modal HTML embedded directly into document >
    <div id="ex1" class="modal">
        <input type="radio" name="action" value="add" checked> Add
        <input type="text" >	

        </br>

        <input type="radio" name="action" value="remove"> Remove
        <input type="text" >	

        </br>

        <input type="radio" name="action" value="edit"> Edit
        <input type="text" >	

        </br>

        <a id="submit" href="#" rel="modal:close">Submit</a>
    </div-->
    
        









    <div id="cy"></div>
    <script>
        // var cytoscape = require('cytoscape');

        var myObj = {
            root: "car", nodes: [
                { val: "wheel", parent: "car" },
                { val: "door", parent: "car" },
                { val: "console", parent: "car" },
                { val: "seat", parent: "car" },
                { val: "leather", parent: "seat" },
                { val: "cushion", parent: "seat" },
                { val: "fabric", parent: "seat" },
                { val: "hood", parent: "car" },
                { val: "center", parent: "console" }
            ]
        };

        function buildElements(data) {
            var elements = [];
            // push root
            elements.push({ data: { id: data.root } })
            let nodes = data.nodes;
            // push nodes
            for (let i = 0; i < nodes.length; i++) {
                elements.push({ data: { id: nodes[i].val } })
            }
            // push edges
            for (let i = 0; i < nodes.length; i++) {
                elements.push({ data: { id: nodes[i].val + nodes[i].parent, source: nodes[i].val, target: nodes[i].parent } })
            }
            return elements;
        }

        console.log(buildElements(myObj));


        var cy = cytoscape({

            minZoom: 1 / 10,
            maxZoom: 10,

            container: document.getElementById('cy'), // container to render in

            elements: buildElements(myObj)

            /*elements: [ // list of graph elements to start with
                { // node a
                    data: { id: 'a' }
                },
                { // node b
                    data: { id: 'b' }
                },
                { // edge ab
                    data: { id: 'ab', source: 'a', target: 'b' }
                }
            ],*/,

            style: [ // the stylesheet for the graph
                {
                    selector: 'node',
                    style: {
                        'background-color': '#ffffff',
                        'label': 'data(id)'
                    }
                },
                {
                    selector: 'edge',
                    style: {
                        'width': 3,
                        'line-color': '#c0c0c0c',
                        'target-arrow-color': '#c0c0c0c',
                        'target-arrow-shape': 'triangle'
                    }
                },
                {
                    selector: 'text',
                    style: {
                        'color': '#428bca'
                    }
                }
            ],

            layout: {
                name: 'cose'
            }

        });

        cy.on('click', 'node', function (evt) {
            $('#actions').click();
            var node = evt.target
            $('#ex1').show();
            console.log('clicked ' + node.id());
        });

    </script>

</body>

</html>