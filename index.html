<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.9.4/cytoscape.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
    <style>
        #cy {
            width: 1500px;
            height: 900px;
            display: block;
        }
    </style>
</head>

<body>

    <h1>Code</h1>

    <!-- Modal HTML embedded directly into document -->
    <div id="ex1" class="modal">
            <div class="container">
                    <form>
                        <label class="radio-inline">
                            <input type="radio" name="optradio" checked>Add
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="optradio">Remove
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="optradio">Modify
                        </label>
                    </form>
                </div>
        <a href="#" rel="modal:close">Close</a>
    </div>

    <!-- Link to open the modal -->
    <p><a href="#ex1" rel="modal:open">Actions</a></p>

    <div id="cy"></div>
    <script>
        // var cytoscape = require('cytoscape');

        var myObj = {
            root: "car", nodes: [
                { val: "wheel", parent: "car" },
                { val: "door", parent: "car" },
                { val: "console", parent: "car" },
                { val: "seat", parent: "car" },
                { val: "leather", parent: "seat" },
                { val: "cushion", parent: "seat" },
                { val: "fabric", parent: "seat" },
                { val: "hood", parent: "car" },
                { val: "center", parent: "console" }
            ]
        };

        function buildElements(data) {
            var elements = [];
            // push root
            elements.push({ data: { id: data.root } })
            let nodes = data.nodes;
            // push nodes
            for (let i = 0; i < nodes.length; i++) {
                elements.push({ data: { id: nodes[i].val } })
            }
            // push edges
            for (let i = 0; i < nodes.length; i++) {
                elements.push({ data: { id: nodes[i].val + nodes[i].parent, source: nodes[i].val, target: nodes[i].parent } })
            }
            return elements;
        }

        console.log(buildElements(myObj));


        var cy = cytoscape({

            minZoom: 1 / 10,
            maxZoom: 10,

            container: document.getElementById('cy'), // container to render in

            elements: buildElements(myObj)

            /*elements: [ // list of graph elements to start with
                { // node a
                    data: { id: 'a' }
                },
                { // node b
                    data: { id: 'b' }
                },
                { // edge ab
                    data: { id: 'ab', source: 'a', target: 'b' }
                }
            ],*/,

            style: [ // the stylesheet for the graph
                {
                    selector: 'node',
                    style: {
                        'background-color': '#666',
                        'label': 'data(id)'
                    }
                },
                {
                    selector: 'root',
                    style: {
                        'background-color': '#333',
                        'label': 'data(id)'
                    }
                },
                {
                    selector: 'edge',
                    style: {
                        'width': 3,
                        'line-color': '#ccc',
                        'target-arrow-color': '#ccc',
                        'target-arrow-shape': 'triangle'
                    }
                }
            ],

            layout: {
                name: 'cose'
            }

        });

        cy.on('click', 'node', function (evt) {
            var node = evt.target
            console.log('clicked ' + node.id());
            console.log(node);
        });

    </script>

</body>

</html>